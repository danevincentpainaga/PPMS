<!-- <div id="cover-spin" ng-if="ic.show_spinner" ></div> -->
<div class="posting-message" ng-if="ic.show_spinner" >
  <div class="lds-ring">
    <span style="font-weight: 300;">{{ ic.circular_message }}</span>
    <div></div><div></div><div></div><div></div>
  </div>
</div>
<ng-include src="'/header.html'"></ng-include> 
<div>
  <md-toolbar class="md-menu-toolbar" style="border-bottom: 1px solid #c7c7c7;">
    <div layout="row" style="min-height: 64px;">
      <md-toolbar-filler style="display: flex;">
        <md-icon class="material-icons">file_upload</md-icon>
      </md-toolbar-filler>
      <h2 class="md-toolbar-tools" style="padding: 20px;display: flex;justify-content: space-between;">
        <span>Import</span>
      </h2>
      <md-fab-speed-dial ng-hide="ic.hidden" md-direction="left" md-open="ic.isOpen"
                         class="md-scale md-fab-top-right" ng-class="{ 'md-hover-full': ic.hover }"
                          style="top: 4px;right: 1px;">
        <md-fab-trigger>
          <md-button aria-label="menu" class="md-fab md-primary" style="width: 45px;height: 45px;">
            <md-tooltip md-direction="top">Menu</md-tooltip>
            <md-icon class="material-icons">menu_open</md-icon>
          </md-button>
        </md-fab-trigger>

        <md-fab-actions>
          <div>
            <md-button aria-label="Toggle" class="md-fab md-raised md-mini" ng-click="ic.toggleFiltering()">
              <md-tooltip md-direction="left" md-visible="ic.tooltipVisible"md-autohide="false">
                Toggle filter
              </md-tooltip>
              <md-icon class="material-icons">filter_alt</md-icon>
            </md-button>
            <md-button aria-label="Add" class="md-fab md-raised md-mini" ng-click="ic.add()">
              <md-tooltip md-direction="bottom" md-visible="ic.tooltipVisible"md-autohide="false">
                Add
              </md-tooltip>
              <md-icon class="material-icons">add</md-icon>
            </md-button>
          </div>
        </md-fab-actions>
      </md-fab-speed-dial>
    </div>
  </md-toolbar>
  <md-progress-linear md-mode="indeterminate" ng-if="!ic.municipalities_loaded" style="position: absolute;"></md-progress-linear>
  <div layout="column" layout-xs="column" style="background-color: #fff; padding: 5px;" class="import">
<!--     <div flex>
      <div layout="row">
        <md-input-container flex="15">
          <label>Degree</label>
          <md-select ng-model="ic.degree">
            <md-option ng-value="degree" ng-repeat="degree in access_degree"><em>{{ degree }}</em></md-option>
          </md-select>
        </md-input-container>
        <md-input-container flex="20">
          <label>Municipality</label>
          <md-select ng-model="ic.municipality">
            <md-option ng-value="mun.municipality"  ng-repeat="mun in ic.municipalities"><em>{{ mun.municipality }}</em></md-option>
          </md-select>
        </md-input-container>
      </div>
      <input type="file" accept=".xls,.xlsx,.ods" fileread="" opts="ic.gridOptions" multiple="false" />
      <button ng-click="ic.uploadToDatabase()">Upload</button>
    </div>
    <div flex style="border: 1px solid #b0b1b3;min-height: 300px;"  ng-if="!ic.hasImported">
      <md-progress-linear md-mode="determinate" value="{{ic.progress_value}}"></md-progress-linear>
      <div ui-grid="ic.gridOptions" ui-grid-resize-columns ui-grid-exporter class="grid"></div>
      <label>{{ ic.checking_in }}</label>
      <br />
      <label>{{ic.progress_value}}%</label>
      <br />
      
    </div> -->
    
    <div flex style="overflow: hidden;">
      <div ui-grid="ic.gridOptions" 
        ui-grid-resize-columns 
        ui-grid-exporter
        ui-grid-pinning
        ui-grid-auto-resize 
        ng-style="resizeDiv()" resize-div height="217" 
        class="grid">
      </div>
    </div>
    <div style="background: whitesmoke;margin-top: .5em;box-sizing: border-box; padding: 5px;">
      <div style="display: flex; justify-content: space-between;">      
        <span style="font-size: 13px;">Progress: {{ic.progress_value}}%</span>
      </div>
      <div style="margin-top: .3em;">
        <md-progress-linear md-mode="determinate" value="{{ic.progress_value}}" ></md-progress-linear>
        <div layout="row" style="margin-top: 1em;">
          <div flex>
            <span style="font-size: 13px;float: left;width: 100%;">Checking: {{ ic.checking_in }}</span>
            <span style="font-size: 13px;float: left;width: 100%;clear:both;">Total error: <span style="color: red;">{{ ic.total_errors }}</span></span>
          </div>
          <div flex style="display: flex;justify-content: flex-end;font-size: 13px;font-family: century gothic;">
            <button ng-click="ic.importToDatabase()" ng-if="ic.check_finished">{{ ic.importBtn }}</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-include src="'/import_scholars.tmpl.html'"></ng-include>