<div id="cover-spin" ng-if="c.show_spinner" ></div>
<ng-include src="'/header.html'"></ng-include> 
<div style="font-size: 14px;">
  <md-toolbar class="md-menu-toolbar" style="border-bottom: 1px solid #c7c7c7;">
    <div layout="row" style="min-height: 64px;">
      <md-toolbar-filler style="display: flex;">
        <md-icon class="material-icons">update</md-icon>
      </md-toolbar-filler>
      <h2 class="md-toolbar-tools" style="padding: 20px;">
        <span>Renew scholar's</span>
      </h2>
    </div>
  </md-toolbar>
  <div layout="column">
    <div layout="row">
      <div flex></div>
      <div flex-xs="100" flex-sm="100" flex-gt-md="75" class="fading-up">
          <br />
          <ul class="renew-nav">
            <li>
              <a ng-class="{'active': rc.tabStatus === 'Pending'}" ng-click="rc.onSelectStatus('Pending')">Pending</a>
            </li>
            <li>
              <a ng-class="{'active': rc.tabStatus === 'In-Active'}" ng-click="rc.onSelectStatus('In-Active')">In-Active</a>
            </li>
            <li>
              <a ng-class="{'active': rc.tabStatus === 'Pre-Approved'}" ng-click="rc.onSelectStatus('Pre-Approved')">Pre-Approved</a>
            </li>
          </ul>
          <div layout="column">
            <section layout="row" flex layout-xs="column">
              <div flex-xs="100" flex-sm="100" flex-gt-md="70" layout-xs="column" style="background-color: #fff;">
                <md-content flex layout-padding >
                  <div class="renew-scholar-list" style="max-height: 250px;min-height: 250px;">
                    <md-list flex>
                      <md-list-item ng-if="rc.loaded && rc.scholars.length === 0">No results found</md-list-item>
                      <md-list-item class="md-2-line" style="margin-bottom: 10px;" ng-repeat="scholar in rc.scholars track by $index" >
                        <img ng-src="{{ scholar.photo | checkScholarPhoto }}" class="md-avatar scholar-image" alt="" />
                        <div class="md-list-item-text">
                          <h4>{{ scholar | formatName }}</h4>
                          <p>{{ scholar.school.school_name }} - {{ scholar.student_id_number }}, {{ scholar.degree }}</p>
                          <p><span color-contract-status="{{scholar.contract_status}}" style="font-size: 9px;">{{ scholar.contract_status }}</span></p>
                        </div>
                        <span ng-if="$index===rc.selectedIndex" style="margin: 7px 0px;">opening..</span>
                        <md-menu>
                          <md-button aria-label="Open demo menu" class="md-icon-button" ng-click="$mdMenu.open($event)" style="padding: 0px;margin: 0;">
                            <md-icon class="material-icons" >more_horiz</md-icon>
                          </md-button>
                          <md-menu-content width="2">
                            <md-menu-item>
                              <md-button ng-click="rc.edit(scholar)">
                                Edit
                              </md-button>
                            </md-menu-item>
                            <md-menu-item ng-if="scholar.contract_status !== 'Pre-Approved'">
                              <md-button ng-click="rc.renew(scholar, $index)">
                                Renew
                              </md-button>
                            </md-menu-item>
                            <md-menu-item ng-if="scholar.contract_status === 'Pre-Approved'">
                              <md-button ng-click="rc.print(scholar, $index)">
                                Print
                              </md-button>
                            </md-menu-item>
                            <md-menu-item ng-if="scholar.contract_status === 'Pre-Approved'">
                              <md-button ng-click="rc.revert(scholar)">
                                Revert
                              </md-button>
                            </md-menu-item>
                          </md-menu-content>
                        </md-menu>
                      </md-list-item>
                    </md-list>
                  </div>
                </md-content>
              </div>
              <div flex style="background: #efefef;position: relative;" >
                  <md-card style="margin: 0px; position: relative; width: 100%;height: 100%;">
                    <md-card-header style="padding-bottom: 0px !important;">
                      <md-card-header-text>
                        <span class="md-title">Contract</span>
                        <span class="md-subhead" style="font-size: 12px;">
                          Renewal
                        </span>
                      </md-card-header-text>
                    </md-card-header>
                    <md-card-content>
                        <form name="rc.renewForm" novalidate ng-submit="rc.renewForm.$valid && rc.scholar_name && rc.onSubmit()">
                          <div layout="column" >
                              <md-input-container>
                                <label>Type</label>
                                <md-select ng-model="rc.searchType" required>
                                  <md-option ng-value="type" ng-repeat="type in rc.type"><em>{{ type }}</em></md-option>
                                </md-select>
                              </md-input-container>
                              <md-input-container>
                                <label>Select degree</label>
                                <md-select ng-model="rc.degree" required>
                                  <md-option ng-value="degree" ng-repeat="degree in access_degree"><em>{{ degree }}</em></md-option>
                                </md-select>
                              </md-input-container>
                              <md-input-container flex-xs="100" flex-sm="100" flex-gt-md="65">
                                <label>Search</label>
                                <input type="text" ng-model="rc.scholar_name" ng-disabled="rc.renewForm.$invalid">
                                <md-progress-circular class="md-hue-2" md-diameter="15px" style="position: absolute;right: 0px;top: 10px;" ng-if="rc.searching"></md-progress-circular>
                              </md-input-container>
                                <md-button class="md-raised md-primary" type="submit" ng-disabled="rc.renewForm.$invalid || !rc.scholar_name || rc.searching" style="width: 100%;margin: 10px 0px !important;">Submit</md-button>
                          </div>
                        </form>
                    </md-card-content>
                  </md-card>
              </div>
            </section>
          </div>
      </div>
      <div flex></div>
    </div>
    <br />
  </div>
</div>
<edit-scholar scholar="rc.scholar_to_edit"></edit-scholar>
